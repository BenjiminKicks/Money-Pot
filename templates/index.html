{% extends 'base.html'%}


{% block head%}
<title> Home Page</title>

{% endblock %}


{% block body %}
<div class="app">

  <aside class="sidebar">
    <div class="brand">Money-P</div>
    <nav class="nav">
      <a class="nav-link active" href="/">Dashboard</a>
      <a class="nav-link" href="#">Purchases</a>
      <a class="nav-link" href="/lookup">Smart Lookup</a>
      <a class="nav-link" href="/login">Settings</a>
    </nav>
  </aside>

  <main class="main">
    <div class="content">
      <h1>Money-P</h1>

      {% if weekly_budget == 0 %}
        <h3>Add a weekly budget</h3>
      {% endif %}

      <!-- Stat cards (NOT a table) -->
      <div class="stats">
        <div class="stat-card stat-card--budget">
          <div class="stat-label">Weekly Budget</div>
          <div class="stat-value">${{ weekly_budget }}</div>
        </div>

        <div class="stat-card stat-card--spent">
          <div class="stat-label">Spent This Week</div>
          <div class="stat-value">${{ spent }}</div>
        </div>

        <div class="stat-card stat-card--remaining">
          <div class="stat-label">Remaining</div>
          <div class="stat-value">${{ remaining }}</div>
        </div>
      </div>

      <!-- Purchases table -->
      {% if items|length == 0 %}
        <h3>No purchases yet.</h3>
      {% else %}
        <table>
          <thead>
            <tr>
              <th>Amount</th>
              <th>Category</th>
              <th>Shopper</th>
              <th>Time</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
              <tr>
                <td>${{ item.amount }}</td>
                <td>{{ item.category }}</td>
                <td>{{ item.shopper }}</td>
                <td>{{ item.time.strftime("%Y-%m-%d %H:%M") }}</td>
                <td>
                  <a class ="action-link" href="/delete/{{ item.id }}">Delete</a><br/>
                  <a class ="action-link" href="/edit/{{ item.id }}">Edit</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}

      <!-- Add purchase form -->
      <form action="/" method="POST">
        <label for="amount">Amount</label>
        <input type="number" name="amount" id="amount" min="0" step="1" required>

        <label for="category">Category</label>
        <select name="category" id="category" required>
          <option value="" selected disabled>Choose a category</option>
          <option value="meat">Meat</option>
          <option value="dairy">Dairy</option>
          <option value="produce">Produce</option>
          <option value="snacks">Snacks</option>
          <option value="other">Other</option>
        </select>

        <label for="shopper">Shopper</label>
        <input type="text" name="shopper" id="shopper" maxlength="20" required>

        <button type="submit">Add Purchase</button>
      </form>


      <!-- Set weekly budget form -->
      <form action="/budget" method="POST">
        <label for="budget">Weekly Budget</label>
        <input type="number" name="budget" id="budget" min="0" step="1" required>
        <button type="submit">Set Weekly Budget</button>
      </form>
      
      <!-- Logout Button-->
      <div class="Logout_Btn">
      <a class="nav-link active" href="/login">Login Out</a>
      </div>



  
    </div>
  </main>

</div>
{% endblock %}

